<!DOCTYPE html>
<html>
    <head>
        <title>Телеграм-бот</title>
        <meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/task.css" />
        <script type="text/javascript">
            function get_poll() {}
        </script>
    </head>
    <body>
        <div id="main">
            <div class="publication">
                <img src="https://meme.mrbaco.ru/008/1.png" />
            </div>
            <div class="publication">
                <p>Открыть в браузере. Заменить <b>{здесь_ваш_токен}</b> на токен, который вы получили от BotFather.</p>
                <code>https://api.telegram.org/bot{здесь_ваш_токен}/getUpdates</code>
            </div>
            <div class="publication">
                <p>Это ваш ID в Telegram.</p>
                <img src="https://meme.mrbaco.ru/008/2.png" />
            </div>
            <div class="publication">
                <code>https://api.telegram.org/bot{здесь_ваш_токен}/sendMessage?chat_id={здесь_ваш_ID}&text=%D0%97%D0%B4%D1%80%D0%B0%D0%B2%D1%81%D1%82%D0%B2%D1%83%D0%B9%2C%20%D1%85%D0%BE%D0%B7%D1%8F%D0%B8%D0%BD%21</code>
            </div>
            <div class="publication">
                Идём в Макси: <a href="https://maxi-retail.ru/" target="blank">https://maxi-retail.ru/</a>
            </div>
            <div class="publication">
                <p>Создаём переменные:</p>
                <p><code>$item</code> &ndash; название вашего продукта</p>
                <p><code>$token</code> &ndash; токен для бота</p>
                <p><code>$url</code> &ndash; ссылка на ваш продукт</p>
            </div>
            <div class="publication">
                <code>file_get_contents(здесь_название_файла_или_ссылка_на_ресурс);</code>
            </div>
            <div class="publication">
                <code>preg_match('/' . $item . '.*?price":(.*?),/m', $page, $matches);</code>
            </div>
            <div class="publication">
                <code>$matches[1] / 100</code>
            </div>
            <div class="publication">
                <code>urlencode($item . ': ' . $price . ' руб.')</code>
            </div>
            <div class="publication">
                Анонимный опрос.
                <div id="poll">
                    <h3 id="question"></h3>
                    <div id="options"></div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            document.querySelectorAll('.publication').forEach(element => element.addEventListener('click', (event) => {
                fetch('https://meme.mrbaco.ru/api/publications/index.php', {
                    method: 'POST',
                    body: JSON.stringify({
                        'publication': event.target.innerHTML
                    })
                }).then(r => {
                    if (r.status == 201) {
                        event.target.style.backgroundColor = '#E9FFB2';
                    }
                });
            }));
        </script>
    </body>
</html>